{% extends "page.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{%- from "govuk/components/tag/macro.njk" import govukTag -%}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <span class="govuk-caption-l">Manage data share requests</span>
    <h1 class="govuk-heading-xl">Created requests</h1>
  </div>

  <div class="govuk-grid-column-one-third">
    <aside class="app-related-items">
        <nav role="navigation" aria-labelledby="subsection-title">
          <ul class="govuk-list">
            <li><a href="received-requests" class="govuk-link">View created requests</a></li>
             <li><a href="{{ assetpath }}" class="govuk-link">Find data to request</a></li>
          </ul>
        </nav>
    </aside>
  </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        {%- set tableRows = [] -%}
        {%- for resourceID, formData in acquirerForms -%}
            {%- set row = [
                { html: '<a href="/acquirer/' + formData.requestId + '/summary">' + formData.requestId + '</a>' },
                { text: formData.assetTitle },
                { text: formData.ownedBy },
                { text: formData.date },
                { html: govukTag({ text: formData.status, classes: "app-task-list__tag" }) }
            ] -%}
            {%- set tableRows = (tableRows.push(row), tableRows) -%}
        {%- endfor -%}

        {{ govukTable({
            caption: "Pending requests",
            captionClasses: "govuk-table__caption--l",
            head: [
                {
                    text: "Request ID"
                },
                {
                    text: "Dataset"
                },
                {
                    text: "Owner"
                },
                {
                    text: "Needed by"
                },
                {
                    text: "Status"
                }
            ],
            rows: tableRows
        }) }}
    </div>
</div>

{% endblock %} 